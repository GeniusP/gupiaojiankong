# 实时监控面板 - 动态管理功能

## 新功能概述

实时监控面板现已支持**动态添加和删除**股票代码，让您可以灵活自定义监控列表。

## 访问地址

**实时监控面板：** http://127.0.0.1:5001/batch-quick

## 核心功能

### 1️⃣ 动态管理股票

#### 添加股票
1. 在"📋 管理监控股票"区域
2. 输入6位股票代码（如：600000）
3. 点击 **"➕ 添加股票"** 按钮或按回车键
4. 系统立即刷新并显示新股票数据

#### 删除股票
- **方式1**：在股票标签栏点击 **×** 按钮
- **方式2**：在股票卡片右上角点击 **×** 按钮
- 至少保留一只股票

#### 重置默认
- 点击 **"↺ 重置默认"** 按钮
- 恢复为4只默认股票：601869、518880、603993、601138

### 2️⃣ 数据持久化

- 使用 **localStorage** 保存您的股票列表
- 关闭浏览器后重新打开，配置依然保留
- 不同浏览器有独立存储

### 3️⃣ 自动刷新

- **时间范围**：每个交易日 **9:30 - 10:00**
- **刷新频率**：每 **30秒** 自动获取最新数据
- **智能检测**：系统自动检测并启动/停止自动刷新

### 4️⃣ 实时信息展示

页面顶部状态栏显示：
- 📊 **监控股票**：当前监控的股票数量
- ⏰ **自动刷新**：运行中/已关闭
- ⏱️ **下次刷新**：倒计时显示
- 🕒 **上次更新**：最后一次更新时间

## 使用场景

### 场景1：监控自定义股票列表

```
1. 访问 http://127.0.0.1:5001/batch-quick
2. 添加您的持仓股票：
   - 输入 600519（贵州茅台）
   - 输入 000858（五粮液）
   - 输入 002594（比亚迪）
3. 9:30-10:00 自动刷新，实时监控
```

### 场景2：开盘快速扫描

```
1. 添加感兴趣的板块龙头股
2. 开盘前打开页面
3. 9:30自动开始刷新
4. 快速识别开盘跳水、冲板回落等图形
```

### 场景3：临时查看某只股票

```
1. 添加股票代码（如：601318）
2. 点击"🔄 立即刷新"
3. 查看结果
4. 点击卡片右上角 × 删除
```

## 页面布局

```
┌──────────────────────────────────────────────────────────┐
│ 📊 实时监控面板        [返回主页] [立即刷新]            │
├──────────────────────────────────────────────────────────┤
│ 监控股票: 4  |  自动刷新: 已关闭  |  下次刷新: --      │
├──────────────────────────────────────────────────────────┤
│ 📋 管理监控股票                                          │
│ ┌────────────────────────────────────────────────────┐ │
│ │ [输入股票代码...]  [➕ 添加股票]  [↺ 重置默认]    │ │
│ └────────────────────────────────────────────────────┘ │
│ [601869 ×]  [518880 ×]  [603993 ×]  [601138 ×]      │
├──────────────────────────────────────────────────────────┤
│ ┌──────────────┬──────────────┬──────────────┐          │
│ │  601869      │  518880      │  603993      │  ...     │
│ │  长飞光纤    │  中证环保    │  洛阳钼业    │          │
│ │  149.12元   │  ...         │  24.33元     │          │
│ │  +10.00%    │              │  -9.99%      │          │
│ │  [删除 ×]   │  [删除 ×]    │  [删除 ×]    │          │
│ └──────────────┴──────────────┴──────────────┘          │
└──────────────────────────────────────────────────────────┘
```

## 操作说明

### 添加股票

1. 在输入框中输入 **6位数字** 的股票代码
2. 按回车键或点击"添加股票"按钮
3. 股票会立即添加到监控列表并刷新数据

**示例：**
```
600000  # 浦发银行
000001  # 平安银行
002415  # 海康威视
300750  # 宁德时代
```

### 删除股票

**方式1 - 从标签栏删除：**
- 点击股票代码旁边的 **×** 按钮

**方式2 - 从卡片删除：**
- 点击股票卡片右上角的 **×** 按钮

**注意：** 至少需要保留一只股票

### 重置默认

- 点击"重置默认"按钮
- 确认后恢复为4只默认股票
- 默认列表：601869、518880、603993、601138

## 数据验证

系统会自动验证股票代码：
- ✅ 必须是6位数字
- ✅ 不允许重复添加
- ✅ 至少保留一只股票

## 技术特性

### 数据存储
```javascript
// 保存在浏览器localStorage
localStorage.setItem('monitoredStocks', JSON.stringify(stockCodes));
```

### 动态API调用
```javascript
// 每次刷新发送自定义股票列表
POST /api/batch-quick-analyze
{
  "stock_codes": ["601869", "600519", "002594", ...]
}
```

### 智能缓存
- 股票列表保存在浏览器
- 下次访问自动加载
- 无需重复添加

## 常见问题

### Q: 最多可以添加多少只股票？
A: 理论上没有限制，但建议不超过10只以保持页面性能和可读性。

### Q: 股票列表会永久保存吗？
A: 保存在浏览器的localStorage中，清除浏览器数据会丢失。

### Q: 可以在不同设备间同步吗？
A: 目前不支持，每个设备的配置独立保存。

### Q: 删除股票后还可以恢复吗？
A: 可以重新添加，或点击"重置默认"恢复初始配置。

### Q: 为什么有些股票显示"数据加载失败"？
A: 可能是股票代码错误、数据源问题或停牌股票。

## 最佳实践

### 开盘监控（推荐）
1. 前一天晚上添加好要监控的股票
2. 上午9:25打开页面
3. 9:30-10:00自动刷新监控
4. 结合AI分析做交易决策

### 临时查看
1. 随时添加感兴趣的股票
2. 点击"立即刷新"查看数据
3. 查看完毕后删除
4. 保持列表精简

### 板块监控
- 添加同一板块的多只龙头股
- 快速对比板块整体表现
- 识别板块轮动机会

---

**更新日志：**
- v2.0 (2026-01-31): 新增动态添加/删除股票功能
- v1.0 (2026-01-31): 初始版本，固定4只股票

**提示**：本系统仅供学习参考，不构成投资建议。股市有风险，投资需谨慎！
