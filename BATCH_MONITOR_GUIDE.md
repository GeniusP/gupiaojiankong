# 实时监控面板使用说明

## 功能介绍

实时监控面板是股票分析系统的增强功能，可以同时监控多只股票的实时行情，并在开盘关键时间段自动刷新数据。

## 访问方式

### 方式1：从主页跳转
1. 访问主页：http://127.0.0.1:5001
2. 点击页面顶部的 **"📈 实时监控面板"** 按钮

### 方式2：直接访问
访问：http://127.0.0.1:5001/batch-quick

## 主要功能

### 1. 同时显示4只股票
实时监控面板会同时显示以下4只股票的数据：
- **601869** - 长飞光纤
- **518880** - 中证环保ETF
- **603993** - 洛阳钼业
- **601138** - 工业富联

### 2. 自动刷新功能
- **自动刷新时间**：每个交易日的 **9:30 - 10:00**
- **刷新频率**：每30秒自动刷新一次
- **显示状态**：页面顶部会显示自动刷新状态和倒计时

### 3. 手动刷新
- 点击 **"🔄 立即刷新"** 按钮可以随时手动刷新数据
- 手动刷新不影响自动刷新的定时器

### 4. 实时数据展示
每只股票卡片显示：
- ✅ 股票名称和代码
- ✅ 当前价格和涨跌幅
- ✅ 开盘价、最高价、涨停价
- ✅ 成交量
- ✅ 图形识别结果
- ✅ AI分析（如适用）
- ✅ 操作建议（如适用）

## 页面布局

### 顶部状态栏
```
┌────────────────────────────────────────────────────────────┐
│ 📊 实时监控面板      [返回主页] [立即刷新]                  │
├────────────────────────────────────────────────────────────┤
│ 自动刷新: 运行中  |  下次刷新: 09:32:15  |  上次更新: ... │
└────────────────────────────────────────────────────────────┘
```

### 股票卡片网格
```
┌─────────────┬─────────────┬─────────────┬─────────────┐
│  601869     │  518880     │  603993     │  601138     │
│  长飞光纤    │  中证环保   │  洛阳钼业   │  工业富联   │
│  价格: ...  │  价格: ...  │  价格: ...  │  价格: ...  │
│  涨跌: +10% │  涨跌: ...  │  涨跌: -9%  │  涨跌: ...  │
│  图形识别   │  图形识别   │  🤖 AI分析  │  图形识别   │
│  ...        │  ...        │  ...        │  ...        │
└─────────────┴─────────────┴─────────────┴─────────────┘
```

## 使用场景

### 场景1：开盘监控（推荐）
1. 在交易日上午9:25打开页面
2. 9:30开始自动刷新，每30秒更新一次数据
3. 及时发现开盘跳水、冲板回落等图形
4. 结合AI分析做出交易决策

### 场景2：全天监控
1. 任意时间访问页面
2. 点击"立即刷新"按钮获取最新数据
3. 同时监控多只持仓股票
4. 快速了解市场状态

### 场景3：选股分析
1. 快速浏览4只预设股票
2. 识别适合的图形形态
3. 查看AI分析建议
4. 决定是否深入分析

## 技术特性

### 自动刷新逻辑
```javascript
// 自动刷新时间范围：9:30 - 10:00
const startTime = 9:30;
const endTime = 10:00;

// 刷新频率：30秒
const refreshInterval = 30000; // 毫秒

// 自动检测并启动/停止
setInterval(checkAutoRefreshTime, 60000); // 每分钟检查一次
```

### 数据获取
- 每次刷新都会重新调用腾讯财经API
- 获取实时行情数据
- 自动检测图形类型
- 调用智谱AI进行智能分析

### 性能优化
- 批量并行获取4只股票数据
- 异步处理，不阻塞页面
- 优雅的加载动画
- 响应式设计，支持移动端

## 注意事项

1. **数据时效性**：
   - 显示的数据为刷新时的快照
   - 不是实时WebSocket推送
   - 建议结合自动刷新功能使用

2. **自动刷新时间**：
   - 仅在9:30-10:00自动刷新
   - 其他时间段需要手动刷新
   - 设计目的是监控开盘关键时刻

3. **API限流**：
   - 每次刷新会调用4次数据API
   - 可能调用AI分析（如果适合）
   - 避免过于频繁的手动刷新

4. **网络延迟**：
   - 数据获取需要1-3秒
   - AI分析需要额外2-5秒
   - 请耐心等待加载完成

## 快捷操作

### 键盘快捷键（如需添加）
- `F5` 或 `Ctrl+R`：浏览器刷新页面
- `Ctrl+Shift+R`：强制刷新（清除缓存）

### 页面导航
- 点击左上角 **"🏠 返回主页"** 回到单股分析页面
- 点击 **"📈 实时监控面板"** 按钮再次进入批量监控

## 常见问题

### Q: 为什么自动刷新只在9:30-10:00？
A: 这是开盘最关键的时间段，大部分图形形态（如开盘跳水、冲板回落）都在这30分钟内形成。

### Q: 可以修改自动刷新的时间范围吗？
A: 可以修改 `templates/batch_quick.html` 中的 `checkAutoRefreshTime()` 函数。

### Q: 可以添加更多股票吗？
A: 可以修改 `app.py` 中的 `/api/batch-quick-analyze` 路由，添加更多股票代码。

### Q: 自动刷新会消耗很多API调用吗？
A: 9:30-10:00共30分钟，每30秒刷新一次，约调用60次。每次4只股票，共240次API调用。

### Q: 如何停止自动刷新？
A: 退出该页面，或等待10:00后自动停止。也可以手动修改代码。

## 更新日志

### v1.0 (2026-01-31)
- ✅ 创建实时监控面板
- ✅ 支持4只股票同时显示
- ✅ 9:30-10:00自动刷新（30秒间隔）
- ✅ 手动刷新按钮
- ✅ 从主页跳转功能
- ✅ 响应式设计
- ✅ AI分析集成

---

**提示**：本系统仅供学习参考，不构成投资建议。股市有风险，投资需谨慎！
