# 🚀 智谱AI实时股票分析工具

## ✅ 特性

- ✅ **100% 真实数据**：每次启动都从腾讯财经API获取最新行情
- ✅ **智谱AI分析**：使用GLM-4-Plus模型进行智能分析
- ✅ **零Mock数据**：绝不使用虚假数据
- ✅ **实时更新**：每次分析都是当前最新数据

## 📊 使用方法

### 方式1：快速分析（推荐）

```bash
# 分析单只股票
python3 analyze.py 601138

# 指定图形类型
python3 analyze.py 601138 -p 开盘跳水
python3 analyze.py 601138 -p 破位下跌
python3 analyze.py 601138 -p 冲板回落

# 分析其他股票
python3 analyze.py 600519    # 贵州茅台
python3 analyze.py 300750    # 宁德时代
python3 analyze.py 002594    # 比亚迪
```

### 方式2：交互式分析

```bash
# 启动交互式工具
python3 real_time_analysis.py

# 选择模式:
# 1. 单只股票分析
# 2. 批量股票分析
```

### 方式3：批量分析

```bash
# 在交互式界面选择"批量分析"
# 然后输入股票代码列表，例如:
# 601138 600036 000001 600519
```

## 📋 分析流程

每次分析都遵循以下流程：

1. **获取实时数据** - 从腾讯财经API获取最新行情
2. **获取市场环境** - 获取板块和大盘涨跌数据
3. **准备分析数据** - 计算技术指标
4. **生成AI提示词** - 根据图形类型生成结构化提示
5. **智谱AI分析** - 调用GLM-4-Plus模型进行智能分析

## 🎯 支持的图形类型

| 图形类型 | 说明 | 判断标准 |
|---------|------|---------|
| 开盘跳水 | 开盘后快速下跌 | 开盘几分钟内跌幅超过2-3% |
| 破位下跌 | 跌破关键支撑位 | 跌破均线/支撑位且未回弹 |
| 冲板回落 | 冲高后快速回落 | 冲至涨停后回落超过5% |

## 📦 系统要求

- Python 3.7+
- 已配置智谱AI API密钥
- 网络连接（访问腾讯财经API和智谱AI）

## 🔧 配置

在 `.env` 文件中配置：

```bash
# 智谱AI配置
ZHIPU_API_KEY=你的API密钥
ZHIPU_MODEL=glm-4-plus
```

## 💡 使用示例

### 示例1：分析工业富联

```bash
$ python3 analyze.py 601138

======================================================================
📊 分析 601138 - 开盘跳水
======================================================================
股票名称: 工业富联
开盘价: 57.0 元
实时价: 57.7 元
涨跌: +1.23%
======================================================================

🤖 智谱AI分析结果:
======================================================================
真跳水，风险中。规避。关键位：56.50(支撑)，57.41(均线)。
======================================================================
```

### 示例2：分析贵州茅台

```bash
$ python3 analyze.py 600519 -p 冲板回落

======================================================================
📊 分析 600519 - 冲板回落
======================================================================
股票名称: 贵州茅台
开盘价: 1680.0 元
实时价: 1650.0 元
涨跌: -1.79%
======================================================================

🤖 智谱AI分析结果:
======================================================================
[AI分析结果]
======================================================================
```

### 示例3：批量分析

```bash
$ python3 real_time_analysis.py

# 选择: 2. 批量股票分析
# 输入: 601138 600036 000001

# 系统会依次分析每只股票
```

## 🔍 数据来源

- **行情数据**: 腾讯财经API (qt.gtimg.cn)
- **AI分析**: 智谱AI GLM-4-Plus模型
- **更新频率**: 每次分析都获取最新数据

## ⚠️ 注意事项

1. **交易时间**: 真实API在交易时间返回的数据最准确
2. **网络连接**: 需要稳定的网络连接
3. **API限制**: 智谱AI有调用频率限制，批量分析时自动添加延迟
4. **数据延迟**: 免费API可能有几秒到十几秒的延迟

## 🎯 与Mock数据的区别

| 特性 | 真实数据工具 | Mock数据 |
|-----|------------|---------|
| 数据来源 | 腾讯财经API | 硬编码 |
| 实时性 | ✅ 实时更新 | ❌ 固定值 |
| 准确性 | ✅ 市场真实数据 | ❌ 测试数据 |
| 使用场景 | 实盘分析 | 功能测试 |

## 📚 相关文件

- `analyze.py` - 快速分析脚本
- `real_time_analysis.py` - 完整交互式工具
- `src/monitors/tencent_collector.py` - 腾讯财经数据采集器
- `src/aigc/model_adapter.py` - 智谱AI适配器

## 🚀 快速开始

```bash
# 1. 确保已配置API密钥
cat .env | grep ZHIPU_API_KEY

# 2. 分析一只股票
python3 analyze.py 601138

# 3. 查看更多选项
python3 analyze.py --help
```

## 📞 技术支持

如有问题，请检查：
1. API密钥是否正确配置
2. 网络连接是否正常
3. 股票代码是否正确
