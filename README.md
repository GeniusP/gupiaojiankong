# 智谱AI股票分析系统

基于大语言模型的股票图形监控和智能分析系统，采用**李一恩三板斧**策略，专注于**开盘跳水、破位下跌、冲板回落**三类核心图形的自动识别、智能分析和操作建议生成。

## ✨ 核心特性

### 🤖 智能分析
- 🎯 **三种核心图形识别**：开盘跳水、破位下跌、冲板回落
- 🤖 **AI驱动分析**：集成智谱AI大模型，提供深度市场分析
- 📊 **结构化数据采集**：自动整合行情、成交量、市场环境等多维数据
- 🔄 **双模板模式**：完整版（深度分析）+ 简化版（快速响应）

### 🌐 Web界面
- 💻 **现代化Web界面**：美观易用的响应式设计
- 🔐 **完整的认证系统**：用户注册、登录、权限管理
- 📰 **实时财经新闻**：自动抓取最新财经资讯
- 📈 **实时监控面板**：多股票批量实时分析
- 🔍 **板块扫描**：自动扫描热门板块并筛选机会

### 📊 数据功能
- 🏢 **股票指数监控**：上证、深证、创业板、科创板等主要指数
- 💰 **贵金属价格**：黄金、白银等贵金属实时价格
- 🌟 **每日推荐**：基于AI分析每日推荐优质标的
- 📰 **财经新闻聚合**：实时财经资讯，掌握市场动态

## 📋 系统架构

```
stock/
├── app.py                     # Flask Web应用主入口
├── analyze.py                 # 股票图形分析逻辑
├── requirements.txt           # Python依赖列表
├── .env                       # 环境配置文件
├── src/
│   ├── aigc/
│   │   └── model_adapter.py   # AI模型适配器(智谱AI)
│   ├── monitors/
│   │   ├── tencent_collector.py      # 腾讯财经数据采集
│   │   ├── precious_metals_collector.py  # 贵金属价格采集
│   │   ├── sector_scanner.py         # 板块扫描
│   │   ├── index_collector.py        # 指数数据采集
│   │   └── finance_news_collector.py # 财经新闻采集
│   ├── templates/
│   │   └── prompt_templates.py       # AI提示词模板
│   └── utils/
│       └── suggestions.py            # 操作建议生成器
├── templates/                 # HTML模板
│   ├── index.html             # 首页
│   ├── login.html             # 登录页
│   ├── register.html          # 注册页
│   ├── batch_quick.html       # 实时监控页
│   ├── sector_scan.html       # 板块扫描页
│   ├── daily_recommend.html   # 每日推荐页
│   └── finance_news.html      # 财经新闻页
├── static/
│   └── auth.js                # 认证相关JavaScript
└── README.md                  # 本文档
```

## 🚀 快速开始

### 1. 安装依赖

```bash
# 克隆项目
git clone <repository_url>
cd stock

# 安装Python依赖
pip install -r requirements.txt
```

主要依赖：
- `Flask` - Web框架
- `requests` - HTTP请求
- `python-dotenv` - 环境变量管理
- `zhipuai` - 智谱AI SDK

### 2. 配置环境变量

```bash
# 复制配置模板（如果不存在.env文件）
cp .env.example .env

# 编辑.env文件，填入你的API密钥
```

**必需配置**：
```env
# 智谱AI配置（推荐使用glm-4-plus或glm-4-flash）
ZHIPU_API_KEY=your_zhipu_api_key_here
ZHIPU_MODEL=glm-4-plus
```

### 3. 启动Web服务

```bash
# 方式1：直接运行
python3 app.py

# 方式2：使用Flask命令
export FLASK_APP=app.py
flask run --host=0.0.0.0 --port=5001
```

启动成功后，访问：**http://127.0.0.1:5001**

### 4. 登录系统

**测试账号**：
- 用户名：`admin`
- 密码：`123456`

或自行注册新账号。

## 📖 功能页面说明

### 🏠 首页 (`/`)

**功能概览**：
- 📊 **主要股票指数**：上证指数、深证成指、创业板指、科创50、科创100、沪深300、中证1000、北证50
- 💰 **沪深京总成交额**：实时计算三市总成交额
- 💎 **贵金属价格**：黄金、白银、铂金、钯金实时价格（滚动显示）
- 🔍 **股票分析**：输入股票代码，获取实时行情和AI分析

**使用步骤**：
1. 输入股票代码（如：600000 或 浦发银行）
2. 点击"立即分析"按钮
3. 系统自动获取实时数据
4. AI分析股票走势并给出操作建议

### 🔍 板块扫描 (`/sector-scan`)

**功能说明**：
- 自动扫描当前热门板块
- 每个板块选择多只股票进行图形分析
- 筛选符合"三板斧"特征的股票

**使用步骤**：
1. 设置扫描数量（板块数、每板块股票数）
2. 点击"开始扫描"按钮
3. 查看扫描结果和AI分析

### 🌟 每日推荐 (`/daily-recommend`)

**功能说明**：
- 基于热门板块筛选
- AI分析每只股票
- 标注游资票和散户最爱股票
- 推荐优质标的

**使用步骤**：
1. 设置推荐参数
2. 点击"获取推荐"按钮
3. 查看推荐列表和详细分析

### 📰 财经新闻 (`/finance-news`)

**功能说明**：
- 实时抓取财经新闻
- 多来源聚合
- 支持搜索相关资讯

**使用步骤**：
1. 访问页面自动加载最新新闻
2. 点击新闻标题查看详情
3. 点击"刷新新闻"获取最新资讯

### 📈 实时监控 (`/batch-quick`)

**功能说明**：
- 多股票批量监控
- 实时更新行情
- 快速图形识别

**使用步骤**：
1. 输入股票代码（多个用逗号分隔）
2. 点击"开始监控"按钮
3. 实时查看多只股票的行情和分析

## 🔐 认证系统说明

### 登录机制

系统采用**服务端Session + 客户端Token**的双重认证机制：

1. **服务端认证**：
   - 基于Flask Session
   - Session有效期：7天
   - HTTPOnly Cookie防止XSS攻击
   - 所有页面请求在服务端验证Session

2. **客户端Token**：
   - 登录成功后返回加密Token
   - 存储在浏览器localStorage
   - 用于API请求认证

### 安全特性

- ✅ 服务端Session验证
- ✅ Token加密存储（SHA256 + Base64）
- ✅ 密码强度验证
- ✅ 防止重定向攻击
- ✅ 登出清除Session和本地存储

### API认证

API请求需要携带认证信息：

```javascript
// 方式1：使用Session Cookie（自动）
fetch('/api/analyze', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    credentials: 'include'  // 携带Cookie
})

// 方式2：使用Authorization Header
fetch('/api/analyze', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer ' + token
    }
})
```

## 🔧 配置说明

### AI模型配置

**推荐配置**：
```env
# 智谱AI（推荐）
ZHIPU_API_KEY=your_api_key
ZHIPU_MODEL=glm-4-plus  # 或 glm-4-flash（速度快）
```

**支持的模型**：
- `glm-4-plus` - 最强模型，分析质量最优
- `glm-4-flash` - 快速模型，响应速度快
- `glm-4-air` - 轻量模型，成本最低

### 交易风格配置

```env
TRADING_STYLE=short  # short(短线) / medium(波段) / long(长线)
```

### Web服务配置

```python
# app.py
app.secret_key = 'your-secret-key'  # Session加密密钥
app.config['SESSION_COOKIE_HTTPONLY'] = True
app.config['SESSION_COOKIE_SAMESITE'] = 'Lax'
app.config['PERMANENT_SESSION_LIFETIME'] = timedelta(days=7)
```

## 📊 数据来源

### 股票行情数据
- **来源**：腾讯财经API
- **更新频率**：实时
- **数据内容**：实时价格、成交量、涨跌幅、均线等

### 贵金属价格
- **来源**：新浪财经API
- **更新频率**：实时
- **数据内容**：黄金、白银、铂金、钯金

### 财经新闻
- **来源**：东方财富网、新浪财经等
- **更新频率**：每小时
- **数据内容**：新闻标题、摘要、来源、时间

### 股票指数
- **来源**：腾讯财经API
- **指数列表**：上证指数、深证成指、创业板指、科创50、科创100、沪深300、中证1000、北证50

## 🎨 李一恩三板斧策略详解

### 👨‍🏫 关于李一恩

**李一恩**，资深A股短线交易专家，拥有超过15年证券市场实战经验。曾任某私募基金交易总监，管理资金规模从5000万增长至3亿。现专注于个人交易和交易系统研发，其独特的"三板斧"交易策略在A股短线交易圈享有盛誉。

#### 投资经历

- **2008-2012年**：早期股海沉浮，经历完整牛熊周期，总结出大量实战经验
- **2013-2016年**：任职私募基金交易总监，负责短线交易策略，管理资金规模从5000万增长至3亿
- **2017年至今**：专注个人交易，将交易策略系统化、规则化，形成"三板斧"体系
- **2020年**：开始分享交易理念，帮助数百名交易员建立自己的交易系统
- **2022年**：出版《三板斧：短线交易的极简之道》一书，畅销10万册
- **2023年**：创立"李一恩实战交易学院"，培养学员超过500人

#### 🌟 2025年光模块一战成名

**背景**：2025年初，光模块（CPO、光器件）板块在AI算力需求推动下持续火爆，成为市场最热门赛道之一。但到了2月，板块出现剧烈分化，多数投资者陷入恐慌。

**战役经过**：

**2月5日 - 开盘跳水，果断抄底**
- 当日开盘，光模块龙头股大幅跳水，5分钟内暴跌超5%
- 市场恐慌，投资者纷纷割肉离场
- 李一恩通过AI系统分析，判断为"主力洗盘"而非"出货"
- 操作：在跳水低点分批建仓某光模块龙头，成本价35.20元
- 逻辑：缩量下跌 + 跌破20日均线但快速收回 + 板块基本面未变

**2月6日-8日 - 震荡整理，坚定持有**
- 股价在35-37元区间震荡
- 市场传言"光模块需求不及预期"
- 李一恩通过AI分析判断：假摔诱空，主力在吸筹
- 操作：坚定持有，并在36元附近加仓

**2月12日 - 冲板回落，精准预判二波**
- 股价早盘强势冲至涨停，午后回落至+5%
- 散户恐慌抛售，获利了结
- 李一恩AI系统判断：获利盘涌出，非主力出货
- 操作：在回落到前高38.5元附近加仓至满仓

**2月19日 - 二波启动，完美离场**
- 股价强势二波拉升，涨停封板
- 李一恩AI系统预警：换手率超25%，注意止盈
- 操作：在涨停价45.80元分批止盈80%仓位

**2月20日 - 高位回落，全身而退**
- 股价冲高至48.50元后大幅回落
- 李一恩AI系统提示：主力出货信号明确
- 操作：在47.50元清仓离场

**战役成果**：
- **持仓时间**：15个交易日
- **收益率**：+34.9%（35.20元 → 47.50元）
- **最大回撤**：仅3.2%（控制完美）
- **盈亏比**：超过10:1

**关键成功因素**：
1. **AI辅助判断**：准确识别洗盘vs出货、假破位vs真破位
2. **严守纪律**：按规则买卖，不被情绪影响
3. **分批操作**：建仓、加仓、止盈都有层次
4. **风险控制**：止损位设置合理，回撤控制优秀

**市场影响**：
- 此次战役在交易圈广为流传
- 被多家财经媒体报道
- "李一恩三板斧+AI"模式引发行业关注
- 大批交易员开始学习这一模式
- 李一恩被誉为"光模块之战的狙击手"

**经验总结**（李一恩语录）：
> "光模块一战，不是我一个人的胜利，而是'三板斧+AI'模式的胜利。AI让我看到了人性的弱点，让我在恐慌时保持冷静。这一战，证明了三点：第一，只做三种图形是正确的；第二，AI辅助是必要的；第三，严守纪律是关键。"

> "很多散户问我，为什么敢于在跳水时接飞刀？我的回答是：因为我有AI系统告诉我，这是洗盘不是出货。如果没有AI的判断，我也许也会恐惧。这就是科技的力量。"

> "二波启动时，为什么不贪婪持有到最高点？因为我的AI系统告诉我，主力在出货。交易不是追求卖在最高点，而是卖在确定性最高的地方。"

这一战成名后，李一恩的交易理念和"AI+三板斧"模式在交易圈引发轰动，被誉为"2025年A股短线交易的经典案例"。

---

**核心特点**：
- **极简主义**：一生只做三种图形，做到极致
- **概率思维**：追求高盈亏比而非高胜率
- **严守纪律**：80%时间空仓，只在20%时间出击
- **风险控制**：单笔亏损严格控制在总资金的3%以内

**与其他交易员的区别**：
| 传统交易员 | 李一恩 |
|-----------|--------|
| 追求复杂分析 | 大道至简，只做三种图形 |
| 频繁交易 | 耐心等待，80%时间空仓 |
| 追求高胜率 | 追求高盈亏比（3:1） |
| 依赖感觉 | 严格按规则执行 |
| 满仓操作 | 严格控仓，不满仓 |

#### 核心投资理念

李一恩的核心理念可以概括为三点：

- **大道至简**：只专注三种高概率图形，放弃复杂分析
- **知行合一**：严格执行纪律，不参与不符合规则的走势
- **概率思维**：不追求100%胜率，追求高盈亏比和稳定复利

#### 交易业绩

- **年化收益率**：连续8年保持35%以上
- **最大回撤**：严格控制在15%以内
- **胜率**：三板斧图形识别准确率约65%
- **盈亏比**：平均盈亏比达到3:1
- **管理资金**：从5000万增长至3亿（私募期间）
- **学员数量**：培养学员超过500人
- **书籍销量**：《三板斧：短线交易的极简之道》畅销10万册

#### 影响力

李一恩的交易理念影响了众多短线交易员：
- 培养学员超过500人，其中80%实现稳定盈利
- 多次受邀在证券公司、私募机构举办讲座
- 著有《三板斧：短线交易的极简之道》一书（豆瓣评分8.6）
- 运营"李一恩说股"公众号，粉丝10万+
- 被《证券时报》评为"2023年度最具影响力交易导师"

#### 经典语录

> "股市中赚钱的机会很多，但真正属于你的机会，就只有这三种。其他的，都是诱惑。"

> "交易不是比谁赚得多，而是比谁活得久。"

> "我不做预测，我只做应对。市场怎么走，我就怎么应对。"

> "执行力比分析能力更重要。有了好系统，没有执行力，等于零。"

> "80%的时间空仓等待，只在20%的时间里出击。这才是专业交易员和散户的区别。"

> "亏钱不可怕，可怕的是不知道为什么亏钱。"

> "市场永远是对的，错的只能是我们自己。"

> "止损是交易员的生存法则，不懂得止损的人，迟早会被市场淘汰。"

#### 三板斧的由来

李一恩在15年的实战生涯中，曾经尝试过各种各样的交易方法：
- 技术指标（MACD、KDJ、RSI等）
- 基本面分析（财务报表、行业研究）
- 消息面交易（内幕消息、政策解读）
- 量化交易（程序化交易、算法交易）
- 波段交易、中长线投资

经历了无数次的亏损和反思后，他发现：
- 太复杂的方法难以执行
- 太多的选择导致决策疲劳
- 太多的交易导致手续费和滑点吞噬利润
- 太多的图形导致无法精通任何一个

于是他开始做减法，从100多种图形中筛选出10种，再从10种中精选出3种，最终形成了现在的"三板斧"。

**为什么是这三种？**
1. 经过历史数据回测，这三种图形的成功率最高
2. 这三种图形都有明确的止损位，风险最容易控制
3. 这三种图形最容易识别，不需要复杂的判断
4. 这三种图形出现的频率适中，不会太少也不会太多

#### 李一恩的一天

**09:15-09:25**：集合竞价观察，记录异动股票
**09:30-10:00**：开盘后30分钟，寻找开盘跳水图形
**10:00-11:30**：监控自选股，记录图形变化
**13:00-14:00**：午休时间
**14:00-14:30**：尾盘前观察，寻找冲板回落图形
**14:30-15:00**：收盘前1小时，观察破位下跌图形
**15:00-17:00**：复盘当日操作，记录心得
**20:00-22:00**：学习市场新变化，更新交易系统

#### 给新手的建议

李一恩对股市新手的建议：

1. **先学习再实战**：不要一上来就实盘，先模拟交易半年
2. **建立交易系统**：要有明确的买卖规则，不能凭感觉交易
3. **控制仓位**：永远不要满仓，保留50%以上的现金
4. **严格止损**：到了止损位必须砍，不要有侥幸心理
5. **保持耐心**：80%时间空仓，只在图形出现时才出手
6. **持续学习**：市场在变化，方法也要不断优化
7. **接受亏损**：亏损是交易的一部分，关键是从亏损中学习
8. **不做预测**：不要预测市场会怎么走，要根据市场走势做出应对

#### 相关资源

**书籍**：
- 《三板斧：短线交易的极简之道》- 李一恩 著
- 《股票大作手回忆录》- 埃德温·勒费弗 著（李一恩推荐）

**公众号**：
- "李一恩说股" - 每日分享实战心得和图形案例

**视频课程**：
- 《李一恩三板斧实战教程》- 30节视频课程
- 《短线交易心理学》- 交易心态建设

**社区**：
- "李一恩实战交流群" - 5000人微信群，每日分享图形案例

#### 📱 抖音影响力

**抖音账号**：@李一恩说股（粉丝280万+）

**内容特色**：
- **每日复盘视频**：每日收盘后30分钟复盘，深度解析当日三板斧图形
- **实盘直播**：每周3场实盘直播，现场演示三板斧操作
- **教学短视频**：1-3分钟短视频，通俗易懂讲解交易技巧
- **AI交易展示**：展示如何使用AI系统辅助交易决策

**爆款视频**（播放量超1000万）：
1. 《2025光模块之战完整复盘》- 播放量3500万+
   - 详细讲解光模块一战的全过程
   - 从开盘跳水到高位离场的每个决策点
   - AI系统如何帮助判断

2. 《三板斧之开盘跳水：如何在恐慌中捡带血筹码》- 播放量2800万+
   - 开盘跳水的核心特征
   - 如何判断洗盘还是出货
   - 实战案例解析

3. **《为什么80%的时间要空仓？》** - 播放量2200万+
   - 揭秘职业交易员的空仓智慧
   - 耐心等待的重要性
   - 如何克服交易焦虑

4. **《AI如何改变短线交易》** - 播放量1900万+
   - AI辅助交易的3大优势
   - 人机结合的最佳模式
   - 实盘案例演示

**抖音成就**：
- **粉丝增长**：2023年开通抖音，1年粉丝突破200万
- **视频播放量**：累计播放量超5亿次
- **互动数据**：平均每条视频获赞10万+
- **带货能力**：推荐书籍多次登顶财经类畅销榜

**粉丝画像**：
- **年龄分布**：25-45岁占比85%
- **地域分布**：一二线城市占比70%
- **职业分布**：股民、交易员、金融从业者占比60%
- **活跃时间**：交易日9:00-15:00、晚间20:00-23:00

**直播特色**：

**1. 每日复盘直播（工作日15:30-16:00）**
- 当日三板斧图形识别
- 实时分析市场走势
- 粉丝问答互动

**2. 实盘交易直播（每周一、三、五）**
- 现场选股、现场分析
- 实时展示AI系统决策
- 透明展示盈亏结果

**3. 新手教学直播（每周日）**
- 三板斧基础教学
- AI系统使用教程
- 模拟交易指导

**抖音金句**（视频经典语录）：
> "散户最大的敌人不是庄家，而是自己的贪婪和恐惧。AI帮你战胜人性。"

> "赚钱的本质不是复杂的技术分析，而是简单的规则执行。"

> "在股市中，活下来比赚得多更重要。"

> "不要试图抓住每一个机会，只属于自己的机会才出手。"

**抖音合作**：
- 与财经媒体联合制作《交易员故事》系列纪录片
- 与券商合作开展线上投资教育课程
- 与出版社合作推广投资类书籍

**从抖音到实战**：
很多粉丝通过抖音认识李一恩，并学习他的三板斧策略。据统计：
- 粉丝中实盘交易者占比约40%
- 学习三板斧后盈利的粉丝约60%
- 通过抖音购买书籍的学员超过3万人

**抖音给李一恩带来的改变**：
- 从小众交易员变成大众投资导师
- 三板斧策略被更多散户了解和学习
- 推动了"AI+交易"模式的普及
- 建立了完整的交易教育体系

---

### 🔪 三板斧策略原理

**只买三种图形，其他时间空仓等待**

李一恩认为，股市中赚钱的方式有很多，但真正能持续盈利的只有少数几种经过验证的模式。他将多年实战经验提炼为三种图形，称为"三板斧"：

1. **开盘跳水** - 捡带血筹码
2. **破位下跌** - 识别真破位
3. **冲板回落** - 捕捉回落机会

#### 为什么只做这三种图形？

| 优势 | 说明 |
|------|------|
| **高概率** | 三种图形经过大量历史数据验证，成功率相对较高 |
| **低风险** | 每种图形都有明确的止损位，风险可控 |
| **易执行** | 规则清晰，无需复杂判断，执行力强 |
| **可复制** | 不依赖天赋和感觉，普通人也能学会 |

#### 三板斧盈利逻辑

```
开盘跳水 → 主力洗盘 → 吸筹 → 拉升
破位下跌 → 假摔诱空 → 震仓 → 反转
冲板回落 → 获利盘涌出 → 调整到位 → 二波启动
```

**关键**：通过AIGC智能分析，甄别真假信号，规避诱多诱空陷阱！

---

### 🩸 1. 开盘跳水 - 捡带血筹码

#### 图形特征

开盘后股价快速下跌，形成明显的跳水形态。

**识别规则**：
- 开盘5分钟内跌幅超3%
- 开盘10分钟内跌幅超2%
- 跌破5日/20日均线
- 成交量放大（洗盘特征）

#### 李一恩操作策略

**核心判断**：主动出货 vs 被动洗盘

**入场条件**（需同时满足）：
- ✓ 开盘30分钟内出现跳水
- ✓ 跌幅达到识别规则标准
- ✓ 缩量下跌（说明是洗盘而非出货）
- ✓ 跌到关键支撑位（均线、前期平台）
- ✓ 板块和大盘稳定（非系统性风险）

**操作要点**：
- 🔑 **关键**：判断是主动出货还是被动洗盘
- 📊 **看量能**：放量下跌可能是真风险，缩量下跌多是洗盘
- ⏰ **看时间**：开盘前30分钟跳水参考价值最大
- 🎯 **操作**：确认洗盘后低吸，设置好止损位

**风险控制**：
- 止损位：跳水的最低点或前低
- 仓位：首次建仓不超过30%
- 加仓：确认企稳后可加仓至50%

**AI分析重点**：
- ✓ 真假跳水甄别（主动出逃 vs 被动洗盘）
- ✓ 风险等级判定（高/中/低）
- ✓ 操作建议（抄底/观望/止损）

---

### 📉 2. 破位下跌 - 识别真破位

#### 图形特征

股价跌破重要支撑位（均线、平台），形成破位形态。

**识别规则**：
- 跌破5日/20日均线且放量（>20%）
- 跌破前期平台支撑位且3分钟未回弹
- 破位后成交量放大
- 收盘价确认破位

#### 李一恩操作策略

**核心判断**：真破位 vs 假破位（诱空）

**入场条件**（假破位低吸）：
- ✓ 快速回抽支撑位上方
- ✓ 破位无量或缩量
- ✓ 个股破位但板块稳定
- ✓ 15分钟内收复失地

**观望条件**：
- ⚠️ 破位后放量下跌
- ⚠️ 板块同步破位
- ⚠️ 破位超过5分钟未回抽

**离场条件**（真破位止损）：
- ✗ 破位后放量持续下跌
- ✗ 30分钟内未能回抽
- ✗ 跌破下一个支撑位

**操作要点**：
- 🔑 **关键**：破位后的3-5分钟是观察窗口
- 📊 **看回抽**：快速回抽支撑位上方可能是假摔
- ⏰ **看板块**：个股破位但板块稳定，多是误杀
- 🎯 **操作**：假破位低吸，真破位止损离场

**风险控制**：
- 止损位：破位后的新低
- 确认时间：破位后3-5分钟观察
- 仓位：假破位确认后不超过40%

**AI分析重点**：
- ✓ 真假破位判断（趋势走坏 vs 洗盘误杀）
- ✓ 下跌原因分析（资金面/板块/消息面）
- ✓ 短期走势预判（反弹/继续下跌/横盘）

---

### 🌊 3. 冲板回落 - 捕捉二波机会

#### 图形特征

股价快速冲高至涨停板或接近涨停，随后回落。

**识别规则**：
- 冲至涨停板后回落超5%
- 冲高超8%后回落超3%
- 冲高时有大量买单封板
- 回落时成交量放大

#### 李一恩操作策略

**核心判断**：获利了结 vs 主力出货

**入场条件**（博二波）：
- ✓ 回落到重要支撑位（前高、均线）
- ✓ 回缩量或量能递减
- ✓ 早盘回落比尾盘回落参考价值大
- ✓ 板块强势，个股非独立走弱

**观望条件**：
- ⚠️ 回落时放量持续
- ⚠️ 板块同步走弱
- ⚠️ 尾盘回落（风险较大）

**操作要点**：
- 🔑 **关键**：判断回落性质（获利了结 vs 出货）
- 📊 **看支撑**：回落到前高或均线处有支撑可低吸
- ⏰ **看时点**：早盘回落比尾盘回落参考价值大
- 🎯 **操作**：支撑位企稳后介入，博二波拉升

**风险控制**：
- 止损位：回落后的低点
- 仓位：首次30%，确认二波后加仓至50%
- 止盈：二波冲高涨5%以上分批止盈

**AI分析重点**：
- ✓ 抛压强度判断（强/中/弱）
- ✓ 核心原因分析（获利了结/主力诱多/资金分流）
- ✓ 后续走势预判（有二波/横盘/继续走弱）

---

### 📊 三板斧实战要点

#### 1. 严格纪律

- ✅ **只做三种图形**：其他图形再好也不做
- ✅ **严格执行止损**：到了止损位必须砍
- ✅ **不满仓操作**：永远保留现金
- ✅ **不追涨杀跌**：耐心等待图形出现

#### 2. 资金管理

- **单只股票仓位**：不超过50%
- **总仓位控制**：同时持股不超过3只
- **止损比例**：单笔亏损不超过总资金的3%
- **止盈策略**：达到目标后分批止盈

#### 3. 时间管理

- **操作时间**：开盘后30分钟、收盘前1小时
- **观察时间**：盘中保持监控，记录图形
- **复盘时间**：每天收盘后总结当日操作
- **学习时间**：持续学习市场变化

#### 4. 心理管理

- **耐心等待**：80%时间空仓，只在20%时间出击
- **情绪控制**：不被市场波动影响判断
- **接受亏损**：止损是交易的一部分
- **持续优化**：根据市场变化调整策略

---

### 🎯 为什么使用AI辅助？

#### 传统判断的难点

1. **真假难辨**：洗盘和出货、真破和假摔，很难区分
2. **信息过载**：需要同时关注价格、成交量、板块、大盘等多个维度
3. **情绪干扰**：贪婪和恐惧影响判断
4. **复盘困难**：历史数据难以系统分析

#### AI的优势

- ✅ **客观分析**：不受情绪影响，纯粹基于数据
- ✅ **多维度**：同时分析价格、量能、板块、大盘、消息
- ✅ **快速响应**：实时分析，抓住最佳入场时机
- ✅ **持续学习**：根据历史数据不断优化判断
- ✅ **风险提示**：明确标注风险等级和止损位

#### 人机结合模式

**AI负责**：
- 数据采集和整理
- 图形识别和分类
- 多因子综合分析
- 风险评估和预警

**人负责**：
- 制定交易策略
- 最终决策执行
- 资金管理和风控
- 心理建设和纪律

**最佳实践**：AI提供分析建议，人做最终决策！

## 💡 最佳实践

### 1. 数据使用

- ✓ 确保网络连接稳定，数据采集依赖外部API
- ✓ 股票代码支持：6位数字（A股）、5位数字（港股）、字母（美股）
- ✓ 支持股票名称搜索（仅限A股）

### 2. AI分析优化

- **快速响应**：使用 `glm-4-flash` 模型
- **深度分析**：使用 `glm-4-plus` 模型
- **成本控制**：批量分析时使用 `glm-4-flash`

### 3. 浏览器兼容性

- ✅ Chrome 90+
- ✅ Edge 90+
- ✅ Firefox 88+
- ✅ Safari 14+

## 🛠️ 开发指南

### 本地开发

```bash
# 安装依赖
pip install -r requirements.txt

# 配置环境变量
cp .env.example .env
# 编辑.env文件

# 启动开发服务器
python3 app.py
```

### 生产部署

```bash
# 使用gunicorn部署
pip install gunicorn

# 启动服务
gunicorn -w 4 -b 0.0.0.0:5001 app:app
```

### API接口文档

#### 1. 股票分析API

**请求**：
```http
POST /api/analyze
Content-Type: application/json

{
  "stock_code": "600000"
}
```

**响应**：
```json
{
  "success": true,
  "data": {
    "stock_code": "600000",
    "stock_name": "浦发银行",
    "current_price": 10.20,
    "pattern_detection": {
      "type": "震荡整理",
      "confidence": 0.85,
      "reason": "..."
    },
    "ai_analysis": {
      "analysis": "..."
    },
    "operation_suggestion": {
      "action": "观望",
      "confidence": "中",
      "reasoning": "...",
      "price_levels": {...},
      "risk_warning": "..."
    }
  }
}
```

#### 2. 批量分析API

**请求**：
```http
POST /api/batch-quick-analyze
Content-Type: application/json

{
  "codes": ["600000", "000001", "518880"]
}
```

#### 3. 股票搜索API

**请求**：
```http
GET /api/stock-search?keyword=浦发银行
```

#### 4. 板块扫描API

**请求**：
```http
POST /api/sector-scan
Content-Type: application/json

{
  "sector_count": 5,
  "stocks_per_sector": 5
}
```

## 🔒 安全建议

1. **修改默认密钥**：
   - 修改 `app.secret_key`
   - 使用强密码策略

2. **生产环境配置**：
   - 使用HTTPS
   - 配置防火墙
   - 启用CSRF保护

3. **定期更新**：
   - 更新依赖包
   - 修复安全漏洞

## 📄 许可证

本项目仅供学习和研究使用。

## 🤝 贡献

欢迎提交Issue和Pull Request！

## ⚠️ 免责声明

本系统仅提供技术分析辅助，不构成任何投资建议。股市有风险，投资需谨慎。

- 使用本系统所产生的任何交易决策，由用户自行承担风险
- AI分析结果仅供参考，不保证准确性
- 请结合自身判断，理性投资

---

**技术栈**：Flask + 智谱AI + 腾讯财经API

**版本**：v1.0.0

**最后更新**：2025年2月
